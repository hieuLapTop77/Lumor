{
	"info": {
		"_postman_id": "87654321-4321-4321-4321-210987654321",
		"name": "TrustApp API v2 - Updated Collection",
		"description": "Updated API collection for TrustApp photo sharing platform with latest endpoints and fixes",
		"schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
		"_exporter_id": "87654321"
	},
	"item": [
		{
			"name": "üîê Authentication",
			"item": [
				{
					"name": "Register User",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"username\": \"newuser\",\n  \"email\": \"newuser@example.com\",\n  \"password\": \"password123\",\n  \"displayName\": \"New User\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v2/auth/register",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "auth", "register"]
						}
					},
					"response": []
				},
				{
					"name": "Login",
					"event": [
						{
							"listen": "test",
							"script": {
								"exec": [
									"if (pm.response.code === 200) {",
									"    const response = pm.response.json();",
									"    if (response.data && response.data.token) {",
									"        pm.environment.set('authToken', response.data.token);",
									"        console.log('Token saved:', response.data.token);",
									"    }",
									"}"
								]
							}
						}
					],
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"email\": \"john@example.com\",\n  \"password\": \"password123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v2/auth/login",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "auth", "login"]
						}
					},
					"response": []
				}
			]
		},
		{
			"name": "üë§ Users",
			"item": [
				{
					"name": "Get Current User Profile",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/users/me",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "users", "me"]
						}
					}
				},
				{
					"name": "Search Users",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/users/search?q=john",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "users", "search"],
							"query": [
								{
									"key": "q",
									"value": "john"
								}
							]
						}
					}
				},
				{
					"name": "Get User by ID",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/users/1",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "users", "1"]
						}
					}
				},
				{
					"name": "Get Sync Settings",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/users/sync-settings",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "users", "sync-settings"]
						}
					}
				},
				{
					"name": "Update Sync Settings",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"autoSyncEnabled\": true,\n  \"permissionType\": \"friends\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v2/users/sync-settings",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "users", "sync-settings"]
						}
					}
				}
			]
		},
		{
			"name": "üì∏ Photos",
			"item": [
				{
					"name": "Upload Photo",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "photo",
									"type": "file",
									"src": []
								},
								{
									"key": "caption",
									"value": "Test photo upload",
									"type": "text"
								},
								{
									"key": "permissionType",
									"value": "public",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/v2/photos/upload",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "photos", "upload"]
						}
					}
				},
				{
					"name": "Get Timeline Feed",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/photos/feed/timeline?page=1&limit=10",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "photos", "feed", "timeline"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					}
				},
				{
					"name": "Get Single Photo Details",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/photos/single/15",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "photos", "single", "15"]
						}
					}
				},
				{
					"name": "Get User Photos",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/photos/1?page=1&limit=12",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "photos", "1"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "12"
								}
							]
						}
					}
				},
				{
					"name": "Update Photo",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"caption\": \"Updated caption\",\n  \"permissionType\": \"friends\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v2/photos/18",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "photos", "18"]
						}
					}
				},
				{
					"name": "Delete Photo",
					"request": {
						"method": "DELETE",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/photos/18",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "photos", "18"]
						}
					}
				},
				{
					"name": "Discover Friends Photos",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/photos/friends/discover?page=1&limit=10",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "photos", "friends", "discover"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					}
				},
				{
					"name": "Get Friend Photos",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/photos/friends/by-user/2?page=1&limit=10",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "photos", "friends", "by-user", "2"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					}
				},
				{
					"name": "Get Storage Stats",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/photos/storage/stats",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "photos", "storage", "stats"]
						}
					}
				}
			]
		},
		{
			"name": "üë• Friends",
			"item": [
				{
					"name": "Send Friend Request",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"addresseeId\": 2\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v2/friends/request",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "friends", "request"]
						}
					}
				},
				{
					"name": "Get Friend Requests",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/friends/requests?type=received",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "friends", "requests"],
							"query": [
								{
									"key": "type",
									"value": "received"
								}
							]
						}
					}
				},
				{
					"name": "Accept Friend Request",
					"request": {
						"method": "PUT",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/friends/1/accept",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "friends", "1", "accept"]
						}
					}
				},
				{
					"name": "Get Friends List",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/friends",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "friends"]
						}
					}
				}
			]
		},
		{
			"name": "üîó Sharing",
			"item": [
				{
					"name": "Share Photo",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"recipientId\": 2,\n  \"shareType\": \"individual_photo\",\n  \"photoId\": 1,\n  \"permissionLevel\": \"view\",\n  \"message\": \"Check out this photo!\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v2/sharing/photo",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "sharing", "photo"]
						}
					}
				},
				{
					"name": "Get Shared With Me",
					"request": {
						"method": "GET",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"url": {
							"raw": "{{baseUrl}}/api/v2/sharing/shared-with-me?page=1&limit=10",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "sharing", "shared-with-me"],
							"query": [
								{
									"key": "page",
									"value": "1"
								},
								{
									"key": "limit",
									"value": "10"
								}
							]
						}
					}
				}
			]
		},
		{
			"name": "üîÑ Device Sync",
			"item": [
				{
					"name": "Start Sync Session",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"deviceId\": \"device123\",\n  \"deviceName\": \"iPhone 13\",\n  \"deviceType\": \"mobile\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v2/device-sync/start",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "device-sync", "start"]
						}
					}
				},
				{
					"name": "Upload Sync Files",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"body": {
							"mode": "formdata",
							"formdata": [
								{
									"key": "files",
									"type": "file",
									"src": []
								},
								{
									"key": "sessionId",
									"value": "session123",
									"type": "text"
								}
							]
						},
						"url": {
							"raw": "{{baseUrl}}/api/v2/device-sync/upload",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "device-sync", "upload"]
						}
					}
				},
				{
					"name": "Complete Sync Session",
					"request": {
						"method": "POST",
						"header": [
							{
								"key": "Content-Type",
								"value": "application/json"
							},
							{
								"key": "Authorization",
								"value": "Bearer {{authToken}}"
							}
						],
						"body": {
							"mode": "raw",
							"raw": "{\n  \"sessionId\": \"session123\"\n}"
						},
						"url": {
							"raw": "{{baseUrl}}/api/v2/device-sync/complete",
							"host": ["{{baseUrl}}"],
							"path": ["api", "v2", "device-sync", "complete"]
						}
					}
				}
			]
		}
	],
	"event": [
		{
			"listen": "prerequest",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		},
		{
			"listen": "test",
			"script": {
				"type": "text/javascript",
				"exec": [
					""
				]
			}
		}
	],
	"variable": [
		{
			"key": "baseUrl",
			"value": "http://localhost:3000",
			"type": "string"
		}
	]
} 